---
icon: i-lucide-file-text
---
# skill

> The skill module discovers and parses [agentskills.io](https://agentskills.io/specification) compliant skill files. Use it to load skills from directories and validate them against the specification.

## What It Solves

Skills are the portable instruction units that make agent behavior repeatable. The `skill` module helps you discover skill files, parse and validate their metadata, and install or uninstall them across supported agents. Use it to manage skills as code instead of manual copying.

## When To Use It

- You want to list skills in a directory or in installed packages.
- You need to validate `SKILL.md` frontmatter against the agentskills.io spec.
- You want to install or uninstall skills across multiple agent runtimes with a consistent API.

## Usage
```ts
import {
  discoverSkills,
  discoverSkillsFromNodeModules,
  extractSkillNames,
  formatDetectedAgentIds,
  formatSkillNames,
  getAgentDisplayNames,
  getBundledSkillSources,
  installSkill,
  installSkillBatch,
  listInstalledSkills,
  listInstalledSkillsByAgent,
  parseSkillMd,
  toPromptXml,
  uninstallSkill,
  validateSkill,
} from 'unagent/skill'
```

### Installation
The installation functions manage skills across AI coding agents.

### installSkill

This function installs skills from a source to one or more agents.

```ts
import { installSkill } from 'unagent/skill'

const result = await installSkill({
  source: 'vercel-labs/agent-skills', // GitHub repo, URL, or local path
  skills: ['frontend-design'], // Filter to specific skills (optional)
  agents: ['claude-code', 'cursor'], // Target agents (auto-detects if omitted)
  mode: 'symlink', // or 'copy' (default: 'symlink')
})

if (result.success) {
  for (const entry of result.installed) {
    console.log(`Installed ${entry.skill} to ${entry.agent} at ${entry.path}`)
  }
}
else {
  for (const err of result.errors) {
    console.error(`Failed: ${err.skill} → ${err.agent}: ${err.error}`)
  }
}
```

The function supports multiple source formats:

| Format | Example |
|--------|---------|
| GitHub shorthand | `owner/repo` or `owner/repo/path` |
| GitHub URL | `https://github.com/owner/repo` |
| GitLab URL | `https://gitlab.com/owner/repo` |
| Local path | `~/my-skills` or `./skills` |

### uninstallSkill

This function removes a skill from agents.

```ts
import { uninstallSkill } from 'unagent/skill'

const result = await uninstallSkill({
  skill: 'frontend-design',
  agents: ['claude-code'], // Auto-detects if omitted
})

if (result.success) {
  for (const entry of result.removed) {
    console.log(`Removed ${entry.skill} from ${entry.agent}`)
  }
}
```

Both functions update the lockfile in each agent's skills directory to track installed skills.

### installSkillBatch

This function installs skills from multiple sources with progress callbacks.

```ts
import { installSkillBatch } from 'unagent/skill'

const result = await installSkillBatch(
  [
    { source: 'owner/repo', skills: ['skill-a'], mode: 'copy' },
    { source: '~/local-skills', mode: 'symlink' },
  ],
  {
    onStart: source => console.log(`Installing from ${source.source}...`),
    onSuccess: (source, result) => console.log(`Installed ${result.installed.length} skills`),
    onError: (source, error) => console.error(`Failed: ${error}`),
  },
)

// Errors are captured in results, not just via callbacks
for (const entry of result.results) {
  if (entry.error) {
    console.error(`${entry.source.source}: ${entry.error}`)
  }
}
```

### listInstalledSkills

This function lists all installed skills across detected agents.

```ts
import { listInstalledSkills } from 'unagent/skill'

const skills = listInstalledSkills()

for (const skill of skills) {
  console.log(`${skill.name} installed in ${skill.agentName} at ${skill.path}`)
}
```

### listInstalledSkillsByAgent

This function groups installed skills by agent.

```ts
import { listInstalledSkillsByAgent } from 'unagent/skill'

const byAgent = listInstalledSkillsByAgent()

for (const [agentId, skills] of byAgent) {
  console.log(`${agentId}: ${skills.map(s => s.name).join(', ')}`)
}
```

### Installation Types
```ts
interface InstallSkillOptions {
  source: string // GitHub repo, URL, or local path
  skills?: string[] // Filter to specific skills
  agents?: string[] // Target agents (auto-detects if omitted)
  global?: boolean // Install to global config (default: true)
  cwd?: string // Working directory for local installs
  mode?: 'symlink' | 'copy' // Link mode (default: 'symlink')
}

interface InstallSkillResult {
  success: boolean
  installed: Array<{ skill: string, agent: string, path: string }>
  errors: Array<{ skill: string, agent: string, error: string }>
}

interface UninstallSkillOptions {
  skill: string // Skill name to remove
  agents?: string[] // Target agents (auto-detects if omitted)
  global?: boolean // Uninstall from global config
  cwd?: string // Working directory
}

interface UninstallSkillResult {
  success: boolean
  removed: Array<{ skill: string, agent: string, path: string }>
  errors: Array<{ skill: string, agent: string, error: string }>
}

interface SkillSource {
  source: string
  skills?: string[]
  label?: string
  mode?: 'symlink' | 'copy'
}

interface BatchInstallCallbacks {
  onStart?: (source: SkillSource) => void
  onSuccess?: (source: SkillSource, result: InstallSkillResult) => void
  onError?: (source: SkillSource, error: string) => void
}

interface BatchInstallResult {
  results: Array<{ source: SkillSource, result?: InstallSkillResult, error?: string }>
  totalInstalled: number
  totalErrors: number
}

interface InstalledSkill {
  name: string
  path: string
  agent: string
  agentName: string
}

interface NpmSkillPackage {
  packageName: string
  skillsDir: string
  skills: DiscoveredSkill[]
}

interface BundledSkillSource {
  source: string
  skills: string[]
  packageName: string
}
```

## API

### Skill Directory Format
Skills follow the [agentskills.io spec](https://agentskills.io/specification). Each skill is a directory containing a `SKILL.md` file.

```
skills/
├── pdf-processing/
│   └── SKILL.md
├── typescript-helper/
│   └── SKILL.md
```

### SKILL.md Format

The `SKILL.md` file contains YAML frontmatter with metadata and markdown content with instructions.

```md [pdf-processing/SKILL.md]
---
name: pdf-processing
description: Extracts text and metadata from PDF files
license: MIT
compatibility: claude-code, cursor
allowed-tools: Bash Read Write
metadata:
  author: johndoe
  version: 1.0.0
---

# Instructions

Your instructions for the agent go here...
```

### Parsing
The parsing functions extract frontmatter and content from skill files.

### parseSkillMd

This function parses a skill markdown file and returns structured data.

```ts
const parsed = parseSkillMd(`---
name: typescript-helper
description: Helps with TypeScript code
globs: ["*.ts", "*.tsx"]
---
You are a TypeScript expert...
`)

parsed.frontmatter // { name, description, globs, ... }
parsed.content // "You are a TypeScript expert..."
parsed.raw // Original content
```

### extractSkillName

This function extracts the skill name from frontmatter or falls back to the filename.

```ts
extractSkillName({ name: 'my-skill', description: 'test' }) // "my-skill"
extractSkillName({ name: '', description: '' }, 'my-skill.md') // "my skill"
```

### Validation
The validation function checks skills against the agentskills.io specification.

### validateSkill

This function validates a parsed skill and returns errors and warnings.

```ts
const result = validateSkill(parsed, 'pdf-processing')

result.valid // true if no errors
result.errors // ["name is required", ...]
result.warnings // ["skill content is empty", ...]
```

The function enforces these rules:

- `name` must be 1-64 characters, lowercase with hyphens only, no consecutive hyphens, and must match the directory name
- `description` must be 1-1024 characters
- `compatibility` must be 500 characters or fewer when present

### Discovery
The discovery functions find and load skills from the filesystem.

### discoverSkills

This function scans a directory for skill directories containing `SKILL.md`.

```ts
const skills = discoverSkills('~/.claude/skills', {
  recursive: true, // Search nested directories
})

for (const skill of skills) {
  console.log(skill.name) // Directory name (= skill name)
  console.log(skill.path) // Full directory path
  console.log(skill.parsed) // ParsedSkill object
}
```

The `.agents/skills` directory may also be supported for some agents.

### filterSkills

This function filters skills by name, description, or tags.

```ts
const tsSkills = filterSkills(skills, 'typescript')
```

### findSkillByName

This function finds a skill by exact name match.

```ts
const skill = findSkillByName(skills, 'pdf-processing')
```

### Prompt Generation
The prompt generation function creates XML output for agent system prompts.

### toPromptXml

This function generates XML following the agentskills.io specification format.

```ts
const xml = toPromptXml(skills)
```

The output follows this structure:

```xml
<available_skills>
  <skill>
    <name>pdf-processing</name>
    <description>Extracts text from PDFs...</description>
    <location>/path/to/skills/pdf-processing</location>
  </skill>
</available_skills>
```

### Types
```ts
interface SkillFrontmatter {
  // Required by spec
  'name': string // lowercase, hyphens, 1-64 chars
  'description': string // 1-1024 chars

  // Optional per spec
  'license'?: string
  'compatibility'?: string // max 500 chars
  'metadata'?: Record<string, string>
  'allowed-tools'?: string // space-delimited

  // Extended (agent-specific)
  'globs'?: string | string[]
  'alwaysApply'?: boolean
  'tags'?: string[]
}

interface ParsedSkill {
  frontmatter: SkillFrontmatter
  content: string
  raw: string
}

interface DiscoveredSkill {
  path: string // Directory path
  name: string // Directory name
  parsed: ParsedSkill
}

interface DiscoverOptions {
  recursive?: boolean
}

interface ValidationResult {
  valid: boolean
  errors: string[]
  warnings: string[]
}
```

### npm Package Discovery
These functions discover skills bundled in `node_modules` packages.

### discoverSkillsFromNodeModules

This function scans `node_modules` for packages with a `skills/` directory.

```ts
import { discoverSkillsFromNodeModules } from 'unagent/skill'

const packages = discoverSkillsFromNodeModules(process.cwd())

for (const pkg of packages) {
  console.log(`${pkg.packageName}: ${pkg.skills.map(s => s.name).join(', ')}`)
}
```

### getBundledSkillSources

This function returns bundled skills as `SkillSource` objects for use with `installSkillBatch`.

```ts
import { getBundledSkillSources, installSkillBatch } from 'unagent/skill'

const sources = getBundledSkillSources(process.cwd())
await installSkillBatch(sources.map(s => ({ ...s, mode: 'symlink' })))
```

### Formatting Utilities
These functions format skill and agent information for display.

### formatSkillNames

This function formats skill names for display, returning `'all'` for items without specific skills.

```ts
import { formatSkillNames } from 'unagent/skill'

formatSkillNames([{ skills: ['a', 'b'] }, { skills: [] }]) // "a, b, all"
```

### extractSkillNames

This function extracts unique skill names from an array of items.

```ts
import { extractSkillNames } from 'unagent/skill'

extractSkillNames([{ skills: ['a', 'b'] }, { skills: ['b', 'c'] }]) // ["a", "b", "c"]
```

### getAgentDisplayNames

This function returns display-friendly agent names.

```ts
import { getAgentDisplayNames } from 'unagent/skill'

getAgentDisplayNames() // ["Claude Code (claude-code)", "Cursor (cursor)"]
```

### formatDetectedAgentIds

This function returns detected agent IDs as a comma-separated string.

```ts
import { formatDetectedAgentIds } from 'unagent/skill'

formatDetectedAgentIds() // "claude-code, cursor"
```

### Frontmatter Fields
| Field | Type | Spec | Description |
|-------|------|------|-------------|
| `name` | `string` | Required | Skill identifier using lowercase and hyphens |
| `description` | `string` | Required | Short description (max 1024 chars) |
| `license` | `string` | Optional | SPDX license identifier |
| `compatibility` | `string` | Optional | Supported agents (max 500 chars) |
| `metadata` | `object` | Optional | Custom key-value pairs |
| `allowed-tools` | `string` | Optional | Space-delimited tool names |
| `globs` | `string \| string[]` | Extended | File patterns to match |
| `alwaysApply` | `boolean` | Extended | Always include this skill |
| `tags` | `string[]` | Extended | Tags for filtering |

## Examples

See the usage section for common patterns.

## Related
- [Core](/core)
- [lock](/core/lock)
- [source](/core/source)
- [env](/core/env)
