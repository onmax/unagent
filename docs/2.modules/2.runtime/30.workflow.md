---
icon: i-lucide-workflow
---
# workflow

> Create durable workflows with a unified API across Vercel Workflow DevKit and Cloudflare Workflows.

## Usage
```ts
import { createWorkflow } from 'unagent/workflow'
```

### Installation
Install `unagent` and the provider SDK for your platform:

::code-group
```bash [Vercel]
pnpm add unagent workflow
```
```bash [Cloudflare]
pnpm add unagent
```
::

### Quick Start
#### Vercel

```ts
import { userSignupWorkflow } from './workflows/user-signup'

const workflow = await createWorkflow({
  provider: { name: 'vercel', workflow: userSignupWorkflow },
})

const run = await workflow.start(['user@example.com'])
const status = await run.status()

await run.stop()
```

::tip
Vercel workflows expect argument arrays. Pass a single argument as `['value']`.
::

### Cloudflare Workers

Cloudflare requires a Workflow binding:

```ts
import { createWorkflow } from 'unagent/workflow'

export default {
  async fetch(req: Request, env: Env) {
    const workflow = await createWorkflow({
      provider: { name: 'cloudflare', binding: env.USER_NOTIFICATIONS },
    })

    const run = await workflow.start({ userId: '123' })
    const status = await run.status()

    return Response.json(status)
  },
}
```

## API

### Unified API
#### WorkflowClient

```ts
interface WorkflowClient {
  readonly provider: 'vercel' | 'cloudflare'
  readonly supports: WorkflowCapabilities

  start: (payload?: unknown, options?: WorkflowStartOptions) => Promise<WorkflowRun>
  get: (id: string) => Promise<WorkflowRun | null>
  startBatch?: (items: WorkflowBatchItem[]) => Promise<WorkflowRun[]>
}
```

### WorkflowRun

```ts
interface WorkflowRun {
  readonly id: string
  readonly provider: 'vercel' | 'cloudflare'

  status: () => Promise<WorkflowRunStatus>
  stop: () => Promise<void>
  pause?: () => Promise<void>
  resume?: () => Promise<void>
  restart?: () => Promise<void>
  sendEvent?: (event: unknown) => Promise<void>
}
```

### Capabilities

```ts
if (workflow.supports.startBatch) {
  await workflow.startBatch?.([{ payload: { id: 1 } }])
}
```

### Normalized Status

```ts
const status = await run.status()
// status.state -> queued | running | paused | waiting | completed | failed | cancelled | terminated | unknown
```

## Examples

See the usage section for common patterns.

## Related
- [All Modules](/modules)
