---
icon: i-lucide-workflow
---
# workflow

> Create durable workflows with a unified API across Vercel Workflow DevKit, Cloudflare Workflows, and OpenWorkflow.

## Usage
```ts [app.ts]
import { createWorkflow } from 'unagent/workflow'
```

### Installation
Install `unagent` and the provider SDK for your platform:

::code-group
```bash [Vercel]
pnpm add unagent workflow
```
```bash [Cloudflare]
pnpm add unagent
```
```bash [OpenWorkflow]
pnpm add unagent openworkflow
```
::

### Quick Start
#### Vercel

```ts [app.ts]
import { createWorkflow } from 'unagent/workflow'
import { userSignupWorkflow } from './workflows/user-signup'

const workflow = await createWorkflow({
  provider: { name: 'vercel', workflow: userSignupWorkflow },
})

const run = await workflow.start(['user@example.com'])
const status = await run.status()

await run.stop()
```

::tip
Vercel workflows expect argument arrays. Pass a single argument as `['value']`.
::

#### OpenWorkflow

OpenWorkflow runs inside Node.js and requires a database. Start a worker separately, then use `createWorkflow` to run workflows from your app code.

```ts [app.ts]
import { createWorkflow } from 'unagent/workflow'
import { onboardingWorkflow } from './workflows/onboarding'

const workflow = await createWorkflow({
  provider: { name: 'openworkflow', workflow: onboardingWorkflow },
})

const run = await workflow.start({ userId: '123' })
const status = await run.status()

await run.stop()
```

::important
OpenWorkflow requires Node.js 20+ and a database backend (Postgres or SQLite). You must run workers yourself.
::

### Cloudflare Workers

Cloudflare requires a Workflow binding:

```ts [worker.ts]
import { createWorkflow } from 'unagent/workflow'

export default {
  async fetch(req: Request, env: Env) {
    const workflow = await createWorkflow({
      provider: { name: 'cloudflare', binding: env.USER_NOTIFICATIONS },
    })

    const run = await workflow.start({ userId: '123' })
    const status = await run.status()

    return Response.json(status)
  },
}
```

## API

### Unified API
#### WorkflowClient

```ts [types.ts]
interface WorkflowClient {
  readonly provider: 'vercel' | 'cloudflare' | 'openworkflow'
  readonly supports: WorkflowCapabilities

  start: (payload?: unknown, options?: WorkflowStartOptions) => Promise<WorkflowRun>
  get: (id: string) => Promise<WorkflowRun | null>
  startBatch?: (items: WorkflowBatchItem[]) => Promise<WorkflowRun[]>
}
```

### WorkflowRun

```ts [types.ts]
interface WorkflowRun {
  readonly id: string
  readonly provider: 'vercel' | 'cloudflare' | 'openworkflow'

  status: () => Promise<WorkflowRunStatus>
  stop: () => Promise<void>
  result?: (options?: WorkflowResultOptions) => Promise<unknown>
  pause?: () => Promise<void>
  resume?: () => Promise<void>
  restart?: () => Promise<void>
  sendEvent?: (event: unknown) => Promise<void>
}
```

::note
`result()` is available on OpenWorkflow and Vercel runs only.
::

### Capabilities

```ts [app.ts]
if (workflow.supports.startBatch) {
  await workflow.startBatch?.([{ payload: { id: 1 } }])
}
```

### Normalized Status

```ts [app.ts]
const status = await run.status()
// status.state -> queued | running | paused | waiting | completed | failed | cancelled | terminated | unknown
```

## Examples

See the usage section for common patterns.

## Related
- [All Modules](/modules)
