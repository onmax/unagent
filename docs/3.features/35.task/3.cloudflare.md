---
icon: i-simple-icons-cloudflare
---

# Cloudflare Workers

> Wire the runner to Cloudflare's `scheduled` event handler.

## Usage

```ts
import { createTaskRunner } from 'unagent/task'

const cleanup = {
  meta: { description: 'Clean up stale records' },
  async run(event) {
    const env = event.context.cloudflare?.env
    return { result: { ok: true } }
  },
}

const runner = createTaskRunner({
  tasks: { 'db:cleanup': cleanup },
  scheduledTasks: { '0 */6 * * *': 'db:cleanup' },
})

export default {
  async scheduled(controller, env, ctx) {
    ctx.waitUntil(runner.runCronTasks(controller.cron, {
      context: { cloudflare: { env, ctx } },
    }))
  },
  async fetch(req, env, ctx) { /* ... */ },
}
```

## `wrangler.toml`

Define cron triggers manually or generate them with `toCloudflareCrons()`:

```toml [wrangler.toml]
[triggers]
crons = [ "0 */6 * * *" ]
```

```ts
import { toCloudflareCrons } from 'unagent/task'

toCloudflareCrons(runner.scheduledTasks)
// â†’ ['0 */6 * * *']
```

## Related
- [Task](/features/task)
- [All Features](/features)
- [Core](/core)
